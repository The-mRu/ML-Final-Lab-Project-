{% extends "base.html" %}
{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-primary text-white py-3">
          <h3 class="mb-0"><i class="fas fa-calculator me-2"></i>Liver Disease Risk Assessment</h3>
        </div>
        <div class="card-body p-4">
          <p class="text-muted mb-4">Please provide the following health information for analysis. All fields are required.</p>
          
          <form method="post" class="needs-validation" novalidate>
            {% csrf_token %}
            
            <div class="row">
              {% for f in feature_names %}
              <div class="col-md-6">
                <div class="input-group">
                  <label for="{{ f }}">{{ f }}</label>
                  <input type="text" id="{{ f }}" name="{{ f }}" class="form-control" placeholder="Enter {{ f }}" required>
                  <div class="invalid-feedback">
                    Please provide a value for {{ f }}.
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            
            <div class="text-center mt-4">
              <button type="submit" class="btn btn-primary btn-lg px-5">
                <i class="fas fa-calculator me-2"></i>Calculate Risk
              </button>
              <a href="{% url 'homepage' %}" class="btn btn-outline-secondary btn-lg ms-2">Cancel</a>
            </div>
          </form>
          
          {% if result %}
          <div class="mt-5">
            <div class="card result-card {% if result.prediction == 1 %}risk-high{% else %}risk-low{% endif %}">
              <div class="card-body p-4">
                <h4 class="card-title"><i class="fas fa-clipboard-list me-2"></i>Prediction Results</h4>
                <div class="row align-items-center">
                  <div class="col-md-8">
                    <h5 class="{% if result.prediction == 1 %}text-danger{% else %}text-success{% endif %}">
                      {% if result.prediction == 1 %}
                      <i class="fas fa-exclamation-triangle me-2"></i>Liver Disease Detected
                      {% else %}
                      <i class="fas fa-check-circle me-2"></i>No Liver Disease Detected
                      {% endif %}
                    </h5>
                    <p class="text-muted mt-3">
                      {% if result.prediction == 1 %}
                      Our analysis indicates potential liver health concerns based on the provided parameters. 
                      Please consult with a healthcare professional for a comprehensive evaluation and proper diagnosis.
                      {% else %}
                      Our analysis suggests low risk for liver disease based on the provided parameters. 
                      Maintain your healthy lifestyle with regular check-ups.
                      {% endif %}
                    </p>
                    {% if result.probability is not None %}
                    {% comment %} <p class="mt-3">
                      <strong>Confidence Level:</strong> {{ result.probability|floatformat:2 }}%
                    </p> {% endcomment %}
                    {% endif %}
                  </div>
                  <div class="col-md-4 text-center">
                    <div class="display-4 {% if result.prediction == 1 %}text-danger{% else %}text-success{% endif %}">
                      <i class="fas {% if result.prediction == 1 %}fa-exclamation-triangle{% else %}fa-check-circle{% endif %}"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mt-4">
              <div class="d-grid gap-2">
                <a href="{% url 'predict_page' %}" class="btn btn-outline-primary">
                  <i class="fas fa-redo me-2"></i>Perform Another Assessment
                </a>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
      
      <!-- Information Section -->
      <div class="card mt-4 border-0 shadow-sm">
        <div class="card-body p-4">
          <h5><i class="fas fa-info-circle me-2 text-primary"></i>About Our Prediction Model</h5>
          <p class="text-muted">
            Our machine learning model has been trained on the Indian Liver Patient Dataset from the UCI Machine Learning Repository.
            It analyzes key health parameters to assess liver disease risk with high accuracy. Note that this tool is for informational
            purposes only and should not replace professional medical advice.
          </p>
          <div class="mt-3">
            <h6>Normal Value References:</h6>
            <ul class="text-muted small">
              <li>Total Bilirubin: 0.1-1.2 mg/dL</li>
              <li>Direct Bilirubin: 0.0-0.3 mg/dL</li>
              <li>Alkaline Phosphotase: 44-147 IU/L</li>
              <li>Alamine Aminotransferase: 7-56 IU/L</li>
              <li>Aspartate Aminotransferase: 10-40 IU/L</li>
              <li>Albumin: 3.5-5.0 g/dL</li>
              <li>Albumin and Globulin Ratio: 1.0-2.0</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Form validation
(function () {
  'use strict'
  var forms = document.querySelectorAll('.needs-validation')
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
})()
</script>
{% endblock %}
{% comment %} 
{% extends "base.html" %}
{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-primary text-white py-3">
          <h3 class="mb-0"><i class="fas fa-calculator me-2"></i>Liver Disease Risk Assessment</h3>
        </div>
        <div class="card-body p-4">
          <p class="text-muted mb-4">Please provide the following health information for analysis. All fields are required.</p>
          
          <form method="post" class="needs-validation" novalidate>
            {% csrf_token %}
            
            <div class="row">
              {% for f in feature_names %}
              <div class="col-md-6">
                <div class="input-group">
                  <label for="{{ f }}">{{ f }}</label>
                  <input type="text" id="{{ f }}" name="{{ f }}" class="form-control" placeholder="Enter {{ f }}" required>
                  <div class="invalid-feedback">
                    Please provide a value for {{ f }}.
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            
            <div class="text-center mt-4">
              <button type="submit" class="btn btn-primary btn-lg px-5">
                <i class="fas fa-calculator me-2"></i>Calculate Risk
              </button>
              <a href="{% url 'homepage' %}" class="btn btn-outline-secondary btn-lg ms-2">Cancel</a>
            </div>
          </form>
          
          {% if result %}
          <div class="mt-5">
            <div class="card result-card {% if 'Disease' in result %}risk-high{% else %}risk-low{% endif %}">
              <div class="card-body p-4">
                <h4 class="card-title"><i class="fas fa-clipboard-list me-2"></i>Prediction Results</h4>
                <div class="row align-items-center">
                  <div class="col-md-8">
                    <h5 class="{% if 'Disease' in result %}text-danger{% else %}text-success{% endif %}">
                      {{ result }}
                    </h5>
                    <p class="text-muted mt-3">
                      {% if 'Disease' in result %}
                      Our analysis indicates potential liver health concerns. Please consult with a healthcare professional for a comprehensive evaluation.
                      {% else %}
                      Our analysis suggests low risk for liver disease. Maintain your healthy lifestyle with regular check-ups.
                      {% endif %}
                    </p>
                  </div>
                  <div class="col-md-4 text-center">
                    <div class="display-4 {% if 'Disease' in result %}text-danger{% else %}text-success{% endif %}">
                      <i class="fas {% if 'Disease' in result %}fa-exclamation-triangle{% else %}fa-check-circle{% endif %}"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mt-4">
              <div class="d-grid gap-2">
                <a href="{% url 'predict_page' %}" class="btn btn-outline-primary">
                  <i class="fas fa-redo me-2"></i>Perform Another Assessment
                </a>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
      
      <!-- Information Section -->
      <div class="card mt-4 border-0 shadow-sm">
        <div class="card-body p-4">
          <h5><i class="fas fa-info-circle me-2 text-primary"></i>About Our Prediction Model</h5>
          <p class="text-muted">
            Our machine learning model has been trained on the Indian Liver Patient Dataset from the UCI Machine Learning Repository.
            It analyzes key health parameters to assess liver disease risk with high accuracy. Note that this tool is for informational
            purposes only and should not replace professional medical advice.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Form validation
(function () {
  'use strict'
  var forms = document.querySelectorAll('.needs-validation')
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
})()
</script>
{% endblock %}
 {% endcomment %}
